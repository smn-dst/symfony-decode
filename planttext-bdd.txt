@startuml
entity user {
+id : int
email : varchar(255)
password_hash : varchar(255)
first_name : varchar(100)
last_name : varchar(100)
phone : varchar(20)
avatar_url : varchar(500)
bio : text
is_host : boolean
is_verified : boolean
created_at : datetime
updated_at : datetime
}
entity user_gamification {
+id : int
user_id : int <<FK>>
level : varchar(50)
total_xp : int
current_streak_days : int
longest_streak_days : int
cities_explored_count : int
created_at : datetime
updated_at : datetime
}
entity badge {
+id : int
code : varchar(50)
name : varchar(100)
description : text
icon_url : varchar(500)
category : varchar(50)
created_at : datetime
}
entity user_badge {
+id : int
user_id : int <<FK>>
badge_id : int <<FK>>
earned_at : datetime
}
entity challenge {
+id : int
code : varchar(50)
name : varchar(100)
description : text
challenge_type : varchar(50)
target_value : int
xp_reward : int
start_date : datetime
end_date : datetime
is_active : boolean
created_at : datetime
updated_at : datetime
}
entity user_challenge {
+id : int
user_id : int <<FK>>
challenge_id : int <<FK>>
current_progress : int
is_completed : boolean
completed_at : datetime
created_at : datetime
updated_at : datetime
}
entity xp_transaction {
+id : int
user_id : int <<FK>>
amount : int
source_type : varchar(50)
source_id : int
description : varchar(255)
created_at : datetime
}
entity property {
+id : int
host_id : int <<FK>>
title : varchar(255)
description : text
property_type : varchar(50)
address_line1 : varchar(255)
address_line2 : varchar(255)
city : varchar(100)
state : varchar(100)
country : varchar(100)
postal_code : varchar(20)
latitude : decimal(10,8)
longitude : decimal(11,8)
max_guests : int
bedrooms : int
beds : int
bathrooms : decimal(3,1)
price_per_night : decimal(10,2)
cleaning_fee : decimal(10,2)
is_active : boolean
created_at : datetime
updated_at : datetime
}
entity property_image {
+id : int
property_id : int <<FK>>
image_url : varchar(500)
is_primary : boolean
display_order : int
created_at : datetime
}
entity amenity {
+id : int
code : varchar(50)
name : varchar(100)
icon : varchar(50)
category : varchar(50)
created_at : datetime
}
entity property_amenity {
+id : int
property_id : int <<FK>>
amenity_id : int <<FK>>
}
entity booking {
+id : int
property_id : int <<FK>>
user_id : int <<FK>>
check_in_date : date
check_out_date : date
number_of_guests : int
number_of_nights : int
price_per_night : decimal(10,2)
cleaning_fee : decimal(10,2)
total_amount : decimal(10,2)
booking_status : varchar(50)
payment_status : varchar(50)
payment_method : varchar(50)
special_requests : text
created_at : datetime
updated_at : datetime
cancelled_at : datetime
}
entity review {
+id : int
booking_id : int <<FK>>
reviewer_id : int <<FK>>
reviewee_id : int <<FK>>
review_type : varchar(50)
rating : decimal(2,1)
cleanliness_rating : decimal(2,1)
accuracy_rating : decimal(2,1)
communication_rating : decimal(2,1)
location_rating : decimal(2,1)
value_rating : decimal(2,1)
comment : text
is_visible : boolean
created_at : datetime
updated_at : datetime
}
entity wishlist {
+id : int
user_id : int <<FK>>
name : varchar(100)
is_private : boolean
created_at : datetime
updated_at : datetime
}
entity wishlist_item {
+id : int
wishlist_id : int <<FK>>
property_id : int <<FK>>
added_at : datetime
}
entity message {
+id : int
booking_id : int <<FK>>
sender_id : int <<FK>>
receiver_id : int <<FK>>
message_text : text
is_read : boolean
read_at : datetime
created_at : datetime
}
entity user_session {
+id : int
user_id : int <<FK>>
session_start : datetime
session_end : datetime
duration_seconds : int
created_at : datetime
}
entity property_view {
+id : int
user_id : int <<FK>>
property_id : int <<FK>>
viewed_at : datetime
}
user ||--o{ user_gamification : has
user ||--o{ user_badge : earns
badge ||--o{ user_badge : awarded_to
user ||--o{ user_challenge : participates
challenge ||--o{ user_challenge : assigned_to
user ||--o{ xp_transaction : receives
user ||--o{ property : hosts
property ||--o{ property_image : has
property ||--o{ property_amenity : offers
amenity ||--o{ property_amenity : available_at
user ||--o{ booking : makes
property ||--o{ booking : receives
booking ||--o{ review : generates
user ||--o{ review : writes_as_reviewer
user ||--o{ review : receives_as_reviewee
user ||--o{ wishlist : creates
wishlist ||--o{ wishlist_item : contains
property ||--o{ wishlist_item : featured_in
booking ||--o{ message : relates_to
user ||--o{ message : sends_as_sender
user ||--o{ message : receives_as_receiver
user ||--o{ user_session : logs
user ||--o{ property_view : views
property ||--o{ property_view : viewed_by
@enduml